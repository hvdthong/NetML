lookuptranslator accepts charsequence input fails work implementations string core org apache commons lang3 text translate hashmap charsequence charsequence lookupmap javadoc charsequence emphasis mine interface refine general contracts equals hashcode methods result comparing objects implement charsequence general undefined object implemented class guarantee class capable testing instances equality inappropriate arbitrary charsequence instances elements set keys map current implementation code work expected charsequence cs1 charsequence cs2 charbuffer wrap tochararray system println stringescapeutils escape html4 translate cs1 system println stringescapeutils escape html4 translate cs2 results identical problem minimum charbuffer equals documented javadoc char buffer equal type object lookup charbuffer map fail compared string implementations obvious work lines system println stringescapeutils escape html4 translate cs2 tostring system println stringescapeutils escapehtml4 cs2 tostring forces back string practical working large sets data require significant heap allocations garbage collection concerns translate method outputs writer simplified examples omit option custom charsequence wrapper char implements hashcode equals work implemented string interesting due symmetric assumption interesting string equals implemented instanceof string final
