stringescapeutils escapexml process utf supplementary characters supplementary characters utf code points 0xffff require java char encoded explained http java sun developer technicalarticles intl supplementary stringescapeutils escapexml aware coding scheme treats char character solution class entities public void escape writer writer string str throws ioexception int len str length int len int code str codepointat string entityname entityname code entityname null writer write writer write entityname writer write code 0x7f writer write writer write code writer write writer write char code code 0xffff fixing escapexml affect html escaping functions guess good thing remember tested escapexml
